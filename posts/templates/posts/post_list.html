{% extends 'base.html' %}
{% load static %}
{% load django_bootstrap5 %}

{% block css %}

 <!-- BEGIN PAGE LEVEL CUSTOM STYLES -->
 <link href="{% static 'assets/css/scrollspyNav.css' %}" rel="stylesheet" type="text/css" />
 <link rel="stylesheet" type="text/css" href="{% static 'assets/css/forms/theme-checkbox-radio.css' %}">
 <link href="{% static 'assets/css/tables/table-basic.css' %}" rel="stylesheet" type="text/css" />
 <!-- END PAGE LEVEL CUSTOM STYLES -->

   <!-- BEGIN PAGE LEVEL PLUGINS -->
   <link href="{% static 'plugins/animate/animate.css' %}" rel="stylesheet" type="text/css" />
   <!-- END PAGE LEVEL PLUGINS -->
   
   <!--  BEGIN CUSTOM STYLE FILE  -->
   <link href="{% static 'assets/css/scrollspyNav.css' %}" rel="stylesheet" type="text/css" />
   <link href="{% static 'assets/css/components/custom-modal.css' %}" rel="stylesheet" type="text/css" />
   <!--  END CUSTOM STYLE FILE  -->

{% endblock css %}



{% block title %}
    my posts
{% endblock title %}

{% block title_page %}
    ALL POSTS

{% endblock title_page %}



{% block body %}


{% include 'parts/message.html' %}

<button type="button" class="btn btn-danger mb-2 mr-2" data-toggle="modal" data-target="#add-post">Add Post</button>




<div class="table-responsive">

    <table class="table table-bordered table-hover table-striped table-checkable table-highlight-head mb-4">
        <thead>
            <tr>
                <th class="checkbox-column">
                    <label class="new-control new-checkbox checkbox-primary" style="height: 18px; margin: 0 auto;">
                        <input type="checkbox" class="new-control-input todochkbox" id="todoAll">
                        <span class="new-control-indicator"></span>
                    </label>
                </th>
                <th class=""> User</th>
                <th class="">Title</th>
                
                <th class="">Content</th>
                <th class="">Tags</th>
                <th class="">Image</th>
                <th class="">Categorry</th>
                <th class="">Draft</th>
                
                <th class="text-center">Icons</th>
            </tr>
        </thead>
        <tbody>
        {% for post in posts %}
            <tr>
                <td class="checkbox-column">
                    <label class="new-control new-checkbox checkbox-primary" style="height: 18px; margin: 0 auto;">
                        <input type="checkbox" class="new-control-input todochkbox" id="todo-1">
                        <span class="new-control-indicator"></span>
                    </label>
                </td>
                <td>
                    <p class="mb-0">{{post.user}}</p>
                </td>
                <td>{{post.title}}</td>
                <td>{{post.content|safe}}</td>
                <td>{{post.tags}}</td>
                <td>{{post.image}}</td>
                <td>{{post.category}}</td>
                <td>{{post.draft}}</td>

                <td class="text-center">
                    <ul class="table-controls">
                        <li><a href="javascript:void(0);" data-toggle="tooltip" data-placement="top" title="Settings"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-settings text-primary"><circle cx="12" cy="12" r="3"></circle><path d="M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"></path></svg></a> </li>
                        <li><a href="javascript:void(0);" data-toggle="tooltip" data-placement="top" title="Edit"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-edit-2 text-success"><path d="M17 3a2.828 2.828 0 1 1 4 4L7.5 20.5 2 22l1.5-5.5L17 3z"></path></svg></a></li>
                        <li><a href="#" data-toggle="modal" data-target="#post-delete" 
                            data-slug="{{post.slug}}" 
                            data-title="{{post.title}}" 
                            
                            data-placement="top" title="Delete"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-trash-2 text-danger"><polyline points="3 6 5 6 21 6"></polyline><path d="M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"></path><line x1="10" y1="11" x2="10" y2="17"></line><line x1="14" y1="11" x2="14" y2="17"></line></svg></a></li>
                    </ul>
                </td>
            </tr>
        {% endfor %}
           
        </tbody>
    </table>
</div>
           
   
</div>


<div id="add-post" class="modal animated zoomInUp custo-zoomInUp" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Modal Header</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
            </div>
            <div class="modal-body">
                <form action="/posts/addpost" method="post" enctype="multipart/form-data">
                    {% csrf_token %}
                    <div class="form-group">
                        
                        <label >Title</label>
                        <input id="t-text" type="text" name="title" placeholder="add title..." class="form-control" required>

                        <label >Content</label>
                        <input id="t-text" type="text" name="content" placeholder="Add Content Text..." class="form-control" required>

                        <label >Tags</label>
                        <input id="t-text" type="text" name="tags" placeholder="Add Tags..." class="form-control" required>

                        <div class="custom-file mb-4">
                            <input type="file" class="custom-file-input" id="customFile" name="files">
                            <label class="custom-file-label" for="customFile">Choose file</label>
                        </div>

                        <div class="custom-control custom-checkbox mb-4">
                            <input type="checkbox" class="custom-control-input" id="disabledFieldsetCheck" name="draft">
                            <label class="custom-control-label" for="disabledFieldsetCheck">Draft</label>
                        </div>

                        <select class="form-control form-control-lg" name='category' >
                            <option >Large select</option>
                        {% for item in category %}
                            <option value="{{item.id}}">{{item}}</option>
                        {% endfor %}
                           
                        </select>

                        
                    </div>
                    <div class="modal-footer md-button">
                        <button class="btn" data-dismiss="modal"><i class="flaticon-cancel-12"></i> Discard</button>
                        <button type="submit" class="btn btn-primary">Save</button>
                    </div>
                </form>
            </div>
           
        </div>
    </div>
</div>

<div id="post-delete" class="modal animated fadeInUp custo-fadeInUp" role="dialog">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title">Delete post</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                  <svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather feather-x"><line x1="18" y1="6" x2="6" y2="18"></line><line x1="6" y1="6" x2="18" y2="18"></line></svg>
                </button>
            </div>
            <div class="modal-body">
                 <form action="{% url 'posts:delete-post' %}" method="post">
                    {% csrf_token %}
                    <p class="modal-text">Are You Sure Delete This Item?? </p>
                    <input id="title" type="text" name="title"  class="form-control" required disabled >
                    <input id="slug" type="hidden" name="slug" class="form-control" required >
                  

                    <div class="modal-footer md-button">
                        <button class="btn" data-dismiss="modal"><i class="flaticon-cancel-12"></i> Discard</button>
                        <button type="submit" class="btn btn-primary">Delete</button>
                    </div>
                 </form>
            </div>
           
        </div>
    </div>
</div>



{% endblock body %}


{% block js %}
<script src="http://code.jquery.com/jquery-1.11.0.min.js" integrity="sha256-/JqT3SQfawRcv/BIHPThkBvs0OEvtFFmqPF/lYI/Cxo=" crossorigin="anonymous"></script>

<script>
    $('#post-delete').on('show.bs.modal', function(event) {
            var button = $(event.relatedTarget)
            var slug = button.data('slug')
            var title = button.data('title')
          
            
            var modal = $(this)
            modal.find('.modal-body #slug').val(slug);
            modal.find('.modal-body #title').val(title);
            
        
        });
</script>
{% endblock js %}
    
